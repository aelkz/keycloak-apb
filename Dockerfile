FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgpkZXNjcmlwdGlvbjogS2V5Y2xvYWsgLSBP\
cGVuIFNvdXJjZSBJZGVudGl0eSBhbmQgQWNjZXNzIE1hbmFnZW1lbnQKYmluZGFibGU6IFRydWUK\
YXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBzc28KICAtIGtleWNsb2FrCm1ldGFkYXRhOgogIGRp\
c3BsYXlOYW1lOiBLZXljbG9hayAoQVBCKQogIGltYWdlVXJsOiAiaHR0cHM6Ly9wYnMudHdpbWcu\
Y29tL3Byb2ZpbGVfaW1hZ2VzLzcwMjExOTgyMTk3OTM0NDg5Ny9vQUMwNWNFQl80MDB4NDAwLnBu\
ZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5rZXljbG9hay5vcmcvZG9jdW1lbnRh\
dGlvbi5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGRlcGVu\
ZGVuY2llczogWydQb3N0Z3Jlc3FsOjkuNSddCiAgc2VydmljZU5hbWU6IGtleWNsb2FrCnBsYW5z\
OgogIC0gbmFtZTogZXBoZW1lcmFsCiAgICBkZXNjcmlwdGlvbjogRGVwbG95IGtleWNsb2FrIHdp\
dGhvdXQgcGVyc2lzdGVuY2UKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogS2V5Y2xvYWsgZXBoZW1lcmFsCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBh\
ZG1pbl91c2VybmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgog\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAg\
ICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6\
IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9h\
ayBhZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgIHJlcXVp\
cmVkOiBGYWxzZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAog\
ICAgICBkZXNjcmlwdGlvbjogVVJMIHdoZXJlIHRoZSBhcHBsaWNhdGlvbnMgc2hvdWxkIHJlZGly\
ZWN0IHRvIGZvciBhdXRoZW50aWNhdGlvbi4gTXVzdCBiZSByZXNvbHZhYmxlIGJ5IHRoZSBicm93\
c2VyIGFuZCBwb2RzLiBMZWF2ZSBlbXB0eSB0byB1c2UgdGhlIGhvc3QgZ2VuZXJhdGVkIGJ5IHRo\
ZSByb3V0ZQogICAgLSBuYW1lOiBrZXljbG9ha191c2VycwogICAgICByZXF1aXJlZDogRmFsc2UK\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0\
bGU6IFVzZXJzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSB1c2VycyB0byBh\
ZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlwcwogICAgLSBuYW1lOiBrZXljbG9h\
a19yb2xlcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRp\
c3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFJvbGVzCiAgICAgIGRlc2NyaXB0aW9u\
OiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8gdGhlIHJlYWxtCiAgICBiaW5kX3Bh\
cmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2VfbmFtZQogICAgICB0aXRsZTogTmFtZSBvZiB0\
aGUgc2VydmljZSB0byBiaW5kCiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1lOiByZWRpcmVj\
dF91cmlzCiAgICAgIHRpdGxlOiBSZWRpcmVjdCBVUklzCiAgICAgIGRlc2NyaXB0aW9uOiBWYWxp\
ZCBSZWRpcmVjdCBVUklzIGEgYnJvd3NlciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBzdWNjZXNz\
ZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxlIHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5nLiBodHRw\
czovL215c2VydmljZS1teXByb2plY3QuYXBwcy5leGFtcGxlLmNvbS8qCiAgICAgIHR5cGU6IHN0\
cmluZwogIC0gbmFtZTogcGVyc2lzdGVudAogICAgZGVzY3JpcHRpb246IERlcGxveSBrZXljbG9h\
ayB3aXRoIHBlcnNpc3RlbmNlCiAgICBmcmVlOiBUcnVlCiAgICBkZWZhdWx0OiBUcnVlCiAgICBt\
ZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEtleWNsb2FrIHBlcnNpc3RlbnQKICAgIHBhcmFt\
ZXRlcnM6CiAgICAtIG5hbWU6IGFkbWluX3VzZXJuYW1lCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAg\
ICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogS2V5Y2xv\
YWsgYWRtaW4gdXNlcm5hbWUKICAgIC0gbmFtZTogYWRtaW5fcGFzc3dvcmQKICAgICAgcmVxdWly\
ZWQ6IFRydWUKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQK\
ICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHBhc3N3b3JkCiAgICAtIG5hbWU6IGFwYl9rZXlj\
bG9ha191cmkKICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0\
aXRsZTogS2V5Y2xvYWsgVVJMCiAgICAgIGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxp\
Y2F0aW9ucyBzaG91bGQgcmVkaXJlY3QgdG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJl\
c29sdmFibGUgYnkgdGhlIGJyb3dzZXIgYW5kIHBvZHMuIExlYXZlIGVtcHR5IHRvIHVzZSB0aGUg\
aG9zdCBnZW5lcmF0ZWQgYnkgdGhlIHJvdXRlCiAgICAtIG5hbWU6IHB2Y19zaXplCiAgICAgIHR5\
cGU6IHN0cmluZwogICAgICBkZWZhdWx0OiAyMDBNaQogICAgICBkZXNjcmlwdGlvbjogRGF0YWJh\
c2Ugc3RvcmFnZSBzaXplCiAgICAgIHRpdGxlOiBTdG9yYWdlIHNpemUKICAgIC0gbmFtZToga2V5\
Y2xvYWtfdXNlcnMKICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgIHRpdGxlOiBVc2VycwogICAgICBkZXNjcmlw\
dGlvbjogSlNPTiBkZWZpbmluZyB0aGUgdXNlcnMgdG8gYWRkIHRvIHRoZSByZWFsbSBhbmQgdGhl\
aXIgbWVtYmVyc2hpcHMKICAgIC0gbmFtZToga2V5Y2xvYWtfcm9sZXMKICAgICAgcmVxdWlyZWQ6\
IEZhbHNlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAg\
ICAgIHRpdGxlOiBSb2xlcwogICAgICBkZXNjcmlwdGlvbjogSlNPTiBkZWZpbmluZyB0aGUgcm9s\
ZXMgdG8gYWRkIHRvIHRoZSByZWFsbQogICAgYmluZF9wYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBz\
ZXJ2aWNlX25hbWUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdGl0bGU6IE5hbWUgb2YgdGhl\
IHNlcnZpY2UgdG8gYmluZAogICAgICB0eXBlOiBzdHJpbmcKICAgIC0gbmFtZTogcmVkaXJlY3Rf\
dXJpcwogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0aXRsZTogUmVkaXJlY3QgVVJJcwogICAg\
ICBkZXNjcmlwdGlvbjogVmFsaWQgUmVkaXJlY3QgVVJJcyBhIGJyb3dzZXIgY2FuIHJlZGlyZWN0\
IHRvIGFmdGVyIGEgc3VjY2Vzc2Z1bCBsb2dpbi9sb2dvdXQuIFNpbXBsZSB3aWxkY2FyZHMgYXJl\
IGFsbG93ZWQuIGUuZy4gaHR0cHM6Ly9teXNlcnZpY2UtbXlwcm9qZWN0LmFwcHMuZXhhbXBsZS5j\
b20vKgogICAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IGV4dGVybmFsCiAgICBkZXNjcmlwdGlv\
bjogQWxsb3dzIGF1dGhlbnRpY2F0aW5nIGFwcGxpY2F0aW9ucyB0byBhbiBleHRlcm5hbCBLZXlj\
bG9hayBpbnN0YW5jZQogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlO\
YW1lOiBLZXljbG9hayAoZXh0ZXJuYWwpCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBhZG1p\
bl91c2VybmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgogICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAt\
IG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6IHN0\
cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9hayBh\
ZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogS2V5Y2xvYWsgVVJMCiAgICAg\
IGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQgcmVkaXJlY3Qg\
dG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJlc29sdmFibGUgYnkgdGhlIGJyb3dzZXIg\
YW5kIHBvZHMuCiAgICAtIG5hbWU6IGtleWNsb2FrX3VzZXJzCiAgICAgIHJlcXVpcmVkOiBGYWxz\
ZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGlzcGxheV90eXBlOiB0ZXh0YXJlYQogICAgICB0\
aXRsZTogVXNlcnMKICAgICAgZGVzY3JpcHRpb246IEpTT04gZGVmaW5pbmcgdGhlIHVzZXJzIHRv\
IGFkZCB0byB0aGUgcmVhbG0gYW5kIHRoZWlyIG1lbWJlcnNoaXBzCiAgICAtIG5hbWU6IGtleWNs\
b2FrX3JvbGVzCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
ZGlzcGxheV90eXBlOiB0ZXh0YXJlYQogICAgICB0aXRsZTogUm9sZXMKICAgICAgZGVzY3JpcHRp\
b246IEpTT04gZGVmaW5pbmcgdGhlIHJvbGVzIHRvIGFkZCB0byB0aGUgcmVhbG0KICAgIGJpbmRf\
cGFyYW1ldGVyczoKICAgIC0gbmFtZTogc2VydmljZV9uYW1lCiAgICAgIHRpdGxlOiBOYW1lIG9m\
IHRoZSBzZXJ2aWNlIHRvIGJpbmQKICAgICAgdHlwZTogc3RyaW5nCiAgICAtIG5hbWU6IHJlZGly\
ZWN0X3VyaXMKICAgICAgdGl0bGU6IFJlZGlyZWN0IFVSSXMKICAgICAgZGVzY3JpcHRpb246IFZh\
bGlkIFJlZGlyZWN0IFVSSXMgYSBicm93c2VyIGNhbiByZWRpcmVjdCB0byBhZnRlciBhIHN1Y2Nl\
c3NmdWwgbG9naW4vbG9nb3V0LiBTaW1wbGUgd2lsZGNhcmRzIGFyZSBhbGxvd2VkLiBlLmcuIGh0\
dHBzOi8vbXlzZXJ2aWNlLW15cHJvamVjdC5hcHBzLmV4YW1wbGUuY29tLyoKICAgICAgdHlwZTog\
c3RyaW5nCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
