FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgpkZXNjcmlwdGlvbjogS2V5Y2xvYWsgLSBP\
cGVuIFNvdXJjZSBJZGVudGl0eSBhbmQgQWNjZXNzIE1hbmFnZW1lbnQKYmluZGFibGU6IFRydWUK\
YXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBzc28KICAtIGtleWNsb2FrCm1ldGFkYXRhOgogIGRp\
c3BsYXlOYW1lOiBLZXljbG9hayAoQVBCKQogIGltYWdlVXJsOiAiaHR0cHM6Ly9wYnMudHdpbWcu\
Y29tL3Byb2ZpbGVfaW1hZ2VzLzcwMjExOTgyMTk3OTM0NDg5Ny9vQUMwNWNFQl80MDB4NDAwLnBu\
ZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5rZXljbG9hay5vcmcvZG9jdW1lbnRh\
dGlvbi5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGRlcGVu\
ZGVuY2llczogWydQb3N0Z3Jlc3FsOjkuNSddCiAgc2VydmljZU5hbWU6IGtleWNsb2FrCnBsYW5z\
OgogIC0gbmFtZTogZXBoZW1lcmFsCiAgICBkZXNjcmlwdGlvbjogRGVwbG95IGtleWNsb2FrIHdp\
dGhvdXQgcGVyc2lzdGVuY2UKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogS2V5Y2xvYWsgZXBoZW1lcmFsCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBh\
ZG1pbl91c2VybmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgog\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAg\
ICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6\
IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9h\
ayBhZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgIHJlcXVp\
cmVkOiBGYWxzZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAog\
ICAgICBkZXNjcmlwdGlvbjogVVJMIHdoZXJlIHRoZSBhcHBsaWNhdGlvbnMgc2hvdWxkIHJlZGly\
ZWN0IHRvIGZvciBhdXRoZW50aWNhdGlvbi4gTXVzdCBiZSByZXNvbHZhYmxlIGJ5IHRoZSBicm93\
c2VyIGFuZCBwb2RzLiBMZWF2ZSBlbXB0eSB0byB1c2UgdGhlIGhvc3QgZ2VuZXJhdGVkIGJ5IHRo\
ZSByb3V0ZQogICAgLSBuYW1lOiBrZXljbG9ha191c2VycwogICAgICByZXF1aXJlZDogRmFsc2UK\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0\
bGU6IFVzZXJzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSB1c2VycyB0byBh\
ZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlwcwogICAgLSBuYW1lOiBrZXljbG9h\
a19yb2xlcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRp\
c3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFJvbGVzCiAgICAgIGRlc2NyaXB0aW9u\
OiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8gdGhlIHJlYWxtCiAgICBiaW5kX3Bh\
cmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2VfbmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICB0aXRsZTogTmFtZSBvZiB0aGUgc2VydmljZSB0byBiaW5kCiAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgLSBuYW1lOiByZWRpcmVjdF91cmlzCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHRp\
dGxlOiBSZWRpcmVjdCBVUklzCiAgICAgIGRlc2NyaXB0aW9uOiBWYWxpZCBSZWRpcmVjdCBVUklz\
IGEgYnJvd3NlciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBzdWNjZXNzZnVsIGxvZ2luL2xvZ291\
dC4gU2ltcGxlIHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5nLiBodHRwczovL215c2VydmljZS1t\
eXByb2plY3QuYXBwcy5leGFtcGxlLmNvbS8qCiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1l\
OiB3ZWJfb3JpZ2lucwogICAgICB0aXRsZTogV2ViIE9yaWdpbnMKICAgICAgZGVzY3JpcHRpb246\
IFdlYiBPcmlnaW5zIHRvIGFsbG93IENPUlMKICAgICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBw\
ZXJzaXN0ZW50CiAgICBkZXNjcmlwdGlvbjogRGVwbG95IGtleWNsb2FrIHdpdGggcGVyc2lzdGVu\
Y2UKICAgIGZyZWU6IFRydWUKICAgIGRlZmF1bHQ6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBk\
aXNwbGF5TmFtZTogS2V5Y2xvYWsgcGVyc2lzdGVudAogICAgcGFyYW1ldGVyczoKICAgIC0gbmFt\
ZTogYWRtaW5fdXNlcm5hbWUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDogYWRt\
aW4KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2VybmFt\
ZQogICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICB0aXRsZTogS2V5\
Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgIC0gbmFtZTogYXBiX2tleWNsb2FrX3VyaQogICAgICBy\
ZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBV\
UkwKICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVyZSB0aGUgYXBwbGljYXRpb25zIHNob3VsZCBy\
ZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24uIE11c3QgYmUgcmVzb2x2YWJsZSBieSB0aGUg\
YnJvd3NlciBhbmQgcG9kcy4gTGVhdmUgZW1wdHkgdG8gdXNlIHRoZSBob3N0IGdlbmVyYXRlZCBi\
eSB0aGUgcm91dGUKICAgIC0gbmFtZTogcHZjX3NpemUKICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
IGRlZmF1bHQ6IDIwME1pCiAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBzdG9yYWdlIHNpemUK\
ICAgICAgdGl0bGU6IFN0b3JhZ2Ugc2l6ZQogICAgLSBuYW1lOiBrZXljbG9ha191c2VycwogICAg\
ICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTog\
dGV4dGFyZWEKICAgICAgdGl0bGU6IFVzZXJzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmlu\
aW5nIHRoZSB1c2VycyB0byBhZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlwcwog\
ICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFJvbGVz\
CiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8gdGhl\
IHJlYWxtCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2VfbmFtZQogICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICB0aXRsZTogTmFtZSBvZiB0aGUgc2VydmljZSB0byBiaW5k\
CiAgICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1lOiByZWRpcmVjdF91cmlzCiAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgIHRpdGxlOiBSZWRpcmVjdCBVUklzCiAgICAgIGRlc2NyaXB0aW9uOiBW\
YWxpZCBSZWRpcmVjdCBVUklzIGEgYnJvd3NlciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBzdWNj\
ZXNzZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxlIHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5nLiBo\
dHRwczovL215c2VydmljZS1teXByb2plY3QuYXBwcy5leGFtcGxlLmNvbS8qCiAgICAgIHR5cGU6\
IHN0cmluZwogICAgLSBuYW1lOiB3ZWJfb3JpZ2lucwogICAgICB0aXRsZTogV2ViIE9yaWdpbnMK\
ICAgICAgZGVzY3JpcHRpb246IFdlYiBPcmlnaW5zIHRvIGFsbG93IENPUlMKICAgICAgdHlwZTog\
c3RyaW5nCiAgLSBuYW1lOiBleHRlcm5hbAogICAgZGVzY3JpcHRpb246IEFsbG93cyBhdXRoZW50\
aWNhdGluZyBhcHBsaWNhdGlvbnMgdG8gYW4gZXh0ZXJuYWwgS2V5Y2xvYWsgaW5zdGFuY2UKICAg\
IGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogS2V5Y2xvYWsgKGV4\
dGVybmFsKQogICAgcGFyYW1ldGVyczoKICAgIC0gbmFtZTogYWRtaW5fdXNlcm5hbWUKICAgICAg\
cmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDogYWRtaW4KICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2VybmFtZQogICAgLSBuYW1lOiBhZG1pbl9wYXNz\
d29yZAogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGlzcGxh\
eV90eXBlOiBwYXNzd29yZAogICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAg\
IC0gbmFtZTogYXBiX2tleWNsb2FrX3VyaQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAogICAgICBkZXNjcmlwdGlvbjogVVJM\
IHdoZXJlIHRoZSBhcHBsaWNhdGlvbnMgc2hvdWxkIHJlZGlyZWN0IHRvIGZvciBhdXRoZW50aWNh\
dGlvbi4gTXVzdCBiZSByZXNvbHZhYmxlIGJ5IHRoZSBicm93c2VyIGFuZCBwb2RzLgogICAgLSBu\
YW1lOiBrZXljbG9ha191c2VycwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFVzZXJzCiAgICAg\
IGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSB1c2VycyB0byBhZGQgdG8gdGhlIHJlYWxt\
IGFuZCB0aGVpciBtZW1iZXJzaGlwcwogICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICBy\
ZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4\
dGFyZWEKICAgICAgdGl0bGU6IFJvbGVzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5n\
IHRoZSByb2xlcyB0byBhZGQgdG8gdGhlIHJlYWxtCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAt\
IG5hbWU6IHNlcnZpY2VfbmFtZQogICAgICB0aXRsZTogTmFtZSBvZiB0aGUgc2VydmljZSB0byBi\
aW5kCiAgICAgIHR5cGU6IHN0cmluZwogICAgICByZXF1aXJlZDogVHJ1ZQogICAgLSBuYW1lOiBy\
ZWRpcmVjdF91cmlzCiAgICAgIHRpdGxlOiBSZWRpcmVjdCBVUklzCiAgICAgIGRlc2NyaXB0aW9u\
OiBWYWxpZCBSZWRpcmVjdCBVUklzIGEgYnJvd3NlciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBz\
dWNjZXNzZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxlIHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5n\
LiBodHRwczovL215c2VydmljZS1teXByb2plY3QuYXBwcy5leGFtcGxlLmNvbS8qCiAgICAgIHR5\
cGU6IHN0cmluZwogICAgICByZXF1aXJlZDogVHJ1ZQogICAgLSBuYW1lOiB3ZWJfb3JpZ2lucwog\
ICAgICB0aXRsZTogV2ViIE9yaWdpbnMKICAgICAgZGVzY3JpcHRpb246IFdlYiBPcmlnaW5zIHRv\
IGFsbG93IENPUlMKICAgICAgdHlwZTogc3RyaW5nCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
