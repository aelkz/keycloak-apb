FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgpkZXNjcmlwdGlvbjogS2V5Y2xvYWsgLSBP\
cGVuIFNvdXJjZSBJZGVudGl0eSBhbmQgQWNjZXNzIE1hbmFnZW1lbnQKYmluZGFibGU6IFRydWUK\
YXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBzc28KICAtIGtleWNsb2FrCm1ldGFkYXRhOgogIGRp\
c3BsYXlOYW1lOiBLZXljbG9hayAoQVBCKQogIGltYWdlVXJsOiAiaHR0cHM6Ly9wYnMudHdpbWcu\
Y29tL3Byb2ZpbGVfaW1hZ2VzLzcwMjExOTgyMTk3OTM0NDg5Ny9vQUMwNWNFQl80MDB4NDAwLnBu\
ZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5rZXljbG9hay5vcmcvZG9jdW1lbnRh\
dGlvbi5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGRlcGVu\
ZGVuY2llczogWydQb3N0Z3Jlc3FsOjkuNSddCiAgc2VydmljZU5hbWU6IGtleWNsb2FrCnBsYW5z\
OgogIC0gbmFtZTogZXBoZW1lcmFsCiAgICBkZXNjcmlwdGlvbjogRGVwbG95IGtleWNsb2FrIHdp\
dGhvdXQgcGVyc2lzdGVuY2UKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogS2V5Y2xvYWsgZXBoZW1lcmFsCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBh\
ZG1pbl91c2VybmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgog\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAg\
ICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6\
IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9h\
ayBhZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgIHJlcXVp\
cmVkOiBGYWxzZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAog\
ICAgICBkZXNjcmlwdGlvbjogVVJMIHdoZXJlIHRoZSBhcHBsaWNhdGlvbnMgc2hvdWxkIHJlZGly\
ZWN0IHRvIGZvciBhdXRoZW50aWNhdGlvbi4gTXVzdCBiZSByZXNvbHZhYmxlIGJ5IHRoZSBicm93\
c2VyIGFuZCBwb2RzLiBMZWF2ZSBlbXB0eSB0byB1c2UgdGhlIGhvc3QgZ2VuZXJhdGVkIGJ5IHRo\
ZSByb3V0ZQogICAgYmluZF9wYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBzZXJ2aWNlX25hbWUKICAg\
ICAgdGl0bGU6IE5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gYmluZAogICAgICB0eXBlOiBzdHJpbmcK\
ICAgIC0gbmFtZTogcmVkaXJlY3RfdXJpcwogICAgICB0aXRsZTogUmVkaXJlY3QgVVJJcwogICAg\
ICBkZXNjcmlwdGlvbjogVmFsaWQgUmVkaXJlY3QgVVJJcyBhIGJyb3dzZXIgY2FuIHJlZGlyZWN0\
IHRvIGFmdGVyIGEgc3VjY2Vzc2Z1bCBsb2dpbi9sb2dvdXQuIFNpbXBsZSB3aWxkY2FyZHMgYXJl\
IGFsbG93ZWQuIGUuZy4gaHR0cHM6Ly9teXNlcnZpY2UtbXlwcm9qZWN0LmFwcHMuZXhhbXBsZS5j\
b20vKgogICAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHBlcnNpc3RlbnQKICAgIGRlc2NyaXB0\
aW9uOiBEZXBsb3kga2V5Y2xvYWsgd2l0aCBwZXJzaXN0ZW5jZQogICAgZnJlZTogVHJ1ZQogICAg\
ZGVmYXVsdDogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBLZXljbG9hayBw\
ZXJzaXN0ZW50CiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBhZG1pbl91c2VybmFtZQogICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAtIG5hbWU6IGFkbWluX3Bh\
c3N3b3JkCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNw\
bGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiBwYXNzd29yZAog\
ICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAogICAgICBkZXNjcmlwdGlvbjog\
VVJMIHdoZXJlIHRoZSBhcHBsaWNhdGlvbnMgc2hvdWxkIHJlZGlyZWN0IHRvIGZvciBhdXRoZW50\
aWNhdGlvbi4gTXVzdCBiZSByZXNvbHZhYmxlIGJ5IHRoZSBicm93c2VyIGFuZCBwb2RzLiBMZWF2\
ZSBlbXB0eSB0byB1c2UgdGhlIGhvc3QgZ2VuZXJhdGVkIGJ5IHRoZSByb3V0ZQogICAgLSBuYW1l\
OiBwdmNfc2l6ZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVmYXVsdDogMjAwTWkKICAgICAg\
ZGVzY3JpcHRpb246IERhdGFiYXNlIHN0b3JhZ2Ugc2l6ZQogICAgICB0aXRsZTogU3RvcmFnZSBz\
aXplCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2VfbmFtZQogICAgICBy\
ZXF1aXJlZDogVHJ1ZQogICAgICB0aXRsZTogTmFtZSBvZiB0aGUgc2VydmljZSB0byBiaW5kCiAg\
ICAgIHR5cGU6IHN0cmluZwogICAgLSBuYW1lOiByZWRpcmVjdF91cmlzCiAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgIHRpdGxlOiBSZWRpcmVjdCBVUklzCiAgICAgIGRlc2NyaXB0aW9uOiBWYWxp\
ZCBSZWRpcmVjdCBVUklzIGEgYnJvd3NlciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBzdWNjZXNz\
ZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxlIHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5nLiBodHRw\
czovL215c2VydmljZS1teXByb2plY3QuYXBwcy5leGFtcGxlLmNvbS8qCiAgICAgIHR5cGU6IHN0\
cmluZwogIC0gbmFtZTogZXh0ZXJuYWwKICAgIGRlc2NyaXB0aW9uOiBBbGxvd3MgYXV0aGVudGlj\
YXRpbmcgYXBwbGljYXRpb25zIHRvIGFuIGV4dGVybmFsIEtleWNsb2FrIGluc3RhbmNlCiAgICBm\
cmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEtleWNsb2FrIChleHRl\
cm5hbCkKICAgIHBhcmFtZXRlcnM6CiAgICAtIG5hbWU6IGFkbWluX3VzZXJuYW1lCiAgICAgIHJl\
cXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gdXNlcm5hbWUKICAgIC0gbmFtZTogYWRtaW5fcGFzc3dv\
cmQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlf\
dHlwZTogcGFzc3dvcmQKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHBhc3N3b3JkCiAgICAt\
IG5hbWU6IGFwYl9rZXljbG9ha191cmkKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBVUkwKICAgICAgZGVzY3JpcHRpb246IFVSTCB3\
aGVyZSB0aGUgYXBwbGljYXRpb25zIHNob3VsZCByZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRp\
b24uIE11c3QgYmUgcmVzb2x2YWJsZSBieSB0aGUgYnJvd3NlciBhbmQgcG9kcy4KICAgIGJpbmRf\
cGFyYW1ldGVyczoKICAgIC0gbmFtZTogc2VydmljZV9uYW1lCiAgICAgIHRpdGxlOiBOYW1lIG9m\
IHRoZSBzZXJ2aWNlIHRvIGJpbmQKICAgICAgdHlwZTogc3RyaW5nCiAgICAtIG5hbWU6IHJlZGly\
ZWN0X3VyaXMKICAgICAgdGl0bGU6IFJlZGlyZWN0IFVSSXMKICAgICAgZGVzY3JpcHRpb246IFZh\
bGlkIFJlZGlyZWN0IFVSSXMgYSBicm93c2VyIGNhbiByZWRpcmVjdCB0byBhZnRlciBhIHN1Y2Nl\
c3NmdWwgbG9naW4vbG9nb3V0LiBTaW1wbGUgd2lsZGNhcmRzIGFyZSBhbGxvd2VkLiBlLmcuIGh0\
dHBzOi8vbXlzZXJ2aWNlLW15cHJvamVjdC5hcHBzLmV4YW1wbGUuY29tLyoKICAgICAgdHlwZTog\
c3RyaW5nCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
