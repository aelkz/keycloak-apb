FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"IyMgU2hhcmVkIHBhcmFtZXRlcnMKX2JpbmRfcGFyYW1zOiAmX2JpbmRfcGFyYW1zCiMgUHJvdmlz\
aW9uIGJpbmQgcGFyYW1zCi0gbmFtZTogc2VydmljZV9uYW1lCiAgZGlzcGxheV9ncm91cDogUHJv\
dmlzaW9uCiAgcmVxdWlyZWQ6IFRydWUKICB0aXRsZTogTmFtZSBvZiB0aGUgc2VydmljZSB0byBi\
aW5kCiAgdHlwZTogc3RyaW5nCi0gbmFtZTogcmVkaXJlY3RfdXJpcwogIGRpc3BsYXlfZ3JvdXA6\
IFByb3Zpc2lvbgogIHJlcXVpcmVkOiBUcnVlCiAgdGl0bGU6IFJlZGlyZWN0IFVSSXMKICBkZXNj\
cmlwdGlvbjogVmFsaWQgUmVkaXJlY3QgVVJJcyBhIGJyb3dzZXIgY2FuIHJlZGlyZWN0IHRvIGFm\
dGVyIGEgc3VjY2Vzc2Z1bCBsb2dpbi9sb2dvdXQuIFNpbXBsZSB3aWxkY2FyZHMgYXJlIGFsbG93\
ZWQuIGUuZy4gaHR0cHM6Ly9teXNlcnZpY2UtbXlwcm9qZWN0LmFwcHMuZXhhbXBsZS5jb20vKgog\
IHR5cGU6IHN0cmluZwotIG5hbWU6IHdlYl9vcmlnaW5zCiAgZGlzcGxheV9ncm91cDogUHJvdmlz\
aW9uCiAgdGl0bGU6IFdlYiBPcmlnaW5zCiAgZGVzY3JpcHRpb246IFdlYiBPcmlnaW5zIHRvIGFs\
bG93IENPUlMKICB0eXBlOiBzdHJpbmcKIyBCaW5kIHNlY3JldCBwYXJhbXMgKHdoaWNoIGVudiB2\
YXJpYWJsZXMgdG8gY3JlYXRlKQotIG5hbWU6IHNzb191cmxfbmFtZQogIGRlZmF1bHQ6IFNTT19V\
UkwKICBkaXNwbGF5X2dyb3VwOiBCaW5kaW5nCiAgdGl0bGU6IEtleWNsb2FrIFVSTCBWYXJpYWJs\
ZSBuYW1lCiAgZGVzY3JpcHRpb246IEhvdyB0aGUgYXBwbGljYXRpb24gd2lsbCByZWZlciB0byB0\
aGUgS2V5Y2xvYWsgVVJMCiAgdHlwZTogc3RyaW5nCi0gbmFtZTogc3NvX3JlYWxtX25hbWUKICBk\
ZWZhdWx0OiBTU09fUkVBTE0KICBkaXNwbGF5X2dyb3VwOiBCaW5kaW5nCiAgdGl0bGU6IEtleWNs\
b2FrIFJlYWxtIFZhcmlhYmxlIG5hbWUKICBkZXNjcmlwdGlvbjogSG93IHRoZSBhcHBsaWNhdGlv\
biB3aWxsIHJlZmVyIHRvIHRoZSBLZXljbG9hayBSZWFsbQogIHR5cGU6IHN0cmluZwotIG5hbWU6\
IHNzb19jbGllbnRfbmFtZQogIGRlZmF1bHQ6IFNTT19DTElFTlQKICBkaXNwbGF5X2dyb3VwOiBC\
aW5kaW5nCiAgdGl0bGU6IEtleWNsb2FrIENsaWVudCBWYXJpYWJsZSBuYW1lCiAgZGVzY3JpcHRp\
b246IEhvdyB0aGUgYXBwbGljYXRpb24gd2lsbCByZWZlciB0byB0aGUgS2V5Y2xvYWsgQ2xpZW50\
IG5hbWUKICB0eXBlOiBzdHJpbmcKdmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgpkZXNj\
cmlwdGlvbjogS2V5Y2xvYWsgLSBPcGVuIFNvdXJjZSBJZGVudGl0eSBhbmQgQWNjZXNzIE1hbmFn\
ZW1lbnQKYmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBzc28KICAtIGtl\
eWNsb2FrCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBLZXljbG9hayAoQVBCKQogIGltYWdlVXJs\
OiAiaHR0cHM6Ly9wYnMudHdpbWcuY29tL3Byb2ZpbGVfaW1hZ2VzLzcwMjExOTgyMTk3OTM0NDg5\
Ny9vQUMwNWNFQl80MDB4NDAwLnBuZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5r\
ZXljbG9hay5vcmcvZG9jdW1lbnRhdGlvbi5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJS\
ZWQgSGF0LCBJbmMuIgogIGRlcGVuZGVuY2llczogWydQb3N0Z3Jlc3FsOjkuNSddCiAgc2Vydmlj\
ZU5hbWU6IGtleWNsb2FrCnBsYW5zOgogIC0gbmFtZTogZXBoZW1lcmFsCiAgICBkZXNjcmlwdGlv\
bjogRGVwbG95IGtleWNsb2FrIHdpdGhvdXQgcGVyc2lzdGVuY2UKICAgIGZyZWU6IFRydWUKICAg\
IG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogS2V5Y2xvYWsgZXBoZW1lcmFsCiAgICBwYXJh\
bWV0ZXJzOgogICAgLSBuYW1lOiBhZG1pbl91c2VybmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNs\
b2FrIGFkbWluIHVzZXJuYW1lCiAgICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3Jk\
CiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBhcGJfa2V5\
Y2xvYWtfdXJpCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
dGl0bGU6IEtleWNsb2FrIFVSTAogICAgICBkZXNjcmlwdGlvbjogVVJMIHdoZXJlIHRoZSBhcHBs\
aWNhdGlvbnMgc2hvdWxkIHJlZGlyZWN0IHRvIGZvciBhdXRoZW50aWNhdGlvbi4gTXVzdCBiZSBy\
ZXNvbHZhYmxlIGJ5IHRoZSBicm93c2VyIGFuZCBwb2RzLiBMZWF2ZSBlbXB0eSB0byB1c2UgdGhl\
IGhvc3QgZ2VuZXJhdGVkIGJ5IHRoZSByb3V0ZQogICAgLSBuYW1lOiBrZXljbG9ha191c2Vycwog\
ICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlw\
ZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFVzZXJzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRl\
ZmluaW5nIHRoZSB1c2VycyB0byBhZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlw\
cwogICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFJv\
bGVzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8g\
dGhlIHJlYWxtCiAgICBiaW5kX3BhcmFtZXRlcnM6ICpfYmluZF9wYXJhbXMKCiAgLSBuYW1lOiBw\
ZXJzaXN0ZW50CiAgICBkZXNjcmlwdGlvbjogRGVwbG95IGtleWNsb2FrIHdpdGggcGVyc2lzdGVu\
Y2UKICAgIGZyZWU6IFRydWUKICAgIGRlZmF1bHQ6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBk\
aXNwbGF5TmFtZTogS2V5Y2xvYWsgcGVyc2lzdGVudAogICAgcGFyYW1ldGVyczoKICAgIC0gbmFt\
ZTogYWRtaW5fdXNlcm5hbWUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDogYWRt\
aW4KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2VybmFt\
ZQogICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICB0aXRsZTogS2V5\
Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgIC0gbmFtZTogYXBiX2tleWNsb2FrX3VyaQogICAgICBy\
ZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBV\
UkwKICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVyZSB0aGUgYXBwbGljYXRpb25zIHNob3VsZCBy\
ZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24uIE11c3QgYmUgcmVzb2x2YWJsZSBieSB0aGUg\
YnJvd3NlciBhbmQgcG9kcy4gTGVhdmUgZW1wdHkgdG8gdXNlIHRoZSBob3N0IGdlbmVyYXRlZCBi\
eSB0aGUgcm91dGUKICAgIC0gbmFtZTogcHZjX3NpemUKICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
IGRlZmF1bHQ6IDIwME1pCiAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBzdG9yYWdlIHNpemUK\
ICAgICAgdGl0bGU6IFN0b3JhZ2Ugc2l6ZQogICAgLSBuYW1lOiBrZXljbG9ha191c2VycwogICAg\
ICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTog\
dGV4dGFyZWEKICAgICAgdGl0bGU6IFVzZXJzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmlu\
aW5nIHRoZSB1c2VycyB0byBhZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlwcwog\
ICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFJvbGVz\
CiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8gdGhl\
IHJlYWxtCiAgICBiaW5kX3BhcmFtZXRlcnM6ICpfYmluZF9wYXJhbXMKCiAgLSBuYW1lOiBleHRl\
cm5hbAogICAgZGVzY3JpcHRpb246IEFsbG93cyBhdXRoZW50aWNhdGluZyBhcHBsaWNhdGlvbnMg\
dG8gYW4gZXh0ZXJuYWwgS2V5Y2xvYWsgaW5zdGFuY2UKICAgIGZyZWU6IFRydWUKICAgIG1ldGFk\
YXRhOgogICAgICBkaXNwbGF5TmFtZTogS2V5Y2xvYWsgKGV4dGVybmFsKQogICAgcGFyYW1ldGVy\
czoKICAgIC0gbmFtZTogYWRtaW5fdXNlcm5hbWUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAg\
ZGVmYXVsdDogYWRtaW4KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBh\
ZG1pbiB1c2VybmFtZQogICAgLSBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICByZXF1aXJlZDog\
VHJ1ZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAg\
ICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgIC0gbmFtZTogYXBiX2tleWNsb2Fr\
X3VyaQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6\
IEtleWNsb2FrIFVSTAogICAgICBkZXNjcmlwdGlvbjogVVJMIHdoZXJlIHRoZSBhcHBsaWNhdGlv\
bnMgc2hvdWxkIHJlZGlyZWN0IHRvIGZvciBhdXRoZW50aWNhdGlvbi4gTXVzdCBiZSByZXNvbHZh\
YmxlIGJ5IHRoZSBicm93c2VyIGFuZCBwb2RzLgogICAgLSBuYW1lOiBrZXljbG9ha191c2Vycwog\
ICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlw\
ZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFVzZXJzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRl\
ZmluaW5nIHRoZSB1c2VycyB0byBhZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlw\
cwogICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgdGl0bGU6IFJv\
bGVzCiAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8g\
dGhlIHJlYWxtCiAgICBiaW5kX3BhcmFtZXRlcnM6ICpfYmluZF9wYXJhbXMK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
