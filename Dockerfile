FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgpkZXNjcmlwdGlvbjogS2V5Y2xvYWsgLSBP\
cGVuIFNvdXJjZSBJZGVudGl0eSBhbmQgQWNjZXNzIE1hbmFnZW1lbnQKYmluZGFibGU6IFRydWUK\
YXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBzc28KICAtIGtleWNsb2FrCm1ldGFkYXRhOgogIGRp\
c3BsYXlOYW1lOiBLZXljbG9hayAoQVBCKQogIGltYWdlVXJsOiAiaHR0cHM6Ly9wYnMudHdpbWcu\
Y29tL3Byb2ZpbGVfaW1hZ2VzLzcwMjExOTgyMTk3OTM0NDg5Ny9vQUMwNWNFQl80MDB4NDAwLnBu\
ZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5rZXljbG9hay5vcmcvZG9jdW1lbnRh\
dGlvbi5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGRlcGVu\
ZGVuY2llczogWydQb3N0Z3Jlc3FsOjkuNSddCiAgc2VydmljZU5hbWU6IGtleWNsb2FrCnBsYW5z\
OgogIC0gbmFtZTogZXBoZW1lcmFsCiAgICBkZXNjcmlwdGlvbjogRGVwbG95IGtleWNsb2FrIHdp\
dGhvdXQgcGVyc2lzdGVuY2UKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogS2V5Y2xvYWsgZXBoZW1lcmFsCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBh\
ZG1pbl91c2VybmFtZQogICAgICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgog\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAg\
ICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6\
IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9h\
ayBhZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBrZXljbG9ha191cmkKICAgICAgcmVxdWlyZWQ6\
IEZhbHNlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogS2V5Y2xvYWsgVVJMCiAgICAg\
IGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQgcmVkaXJlY3Qg\
dG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJlc29sdmFibGUgYnkgdGhlIGJyb3dzZXIg\
YW5kIHBvZHMuIExlYXZlIGVtcHR5IHRvIHVzZSB0aGUgaG9zdCBnZW5lcmF0ZWQgYnkgdGhlIHJv\
dXRlCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2VfbmFtZQogICAgICB0\
aXRsZTogTmFtZSBvZiB0aGUgc2VydmljZSB0byBiaW5kCiAgICAgIHR5cGU6IHN0cmluZwogICAg\
LSBuYW1lOiByZWRpcmVjdF91cmlzCiAgICAgIHRpdGxlOiBSZWRpcmVjdCBVUklzCiAgICAgIGRl\
c2NyaXB0aW9uOiBWYWxpZCBSZWRpcmVjdCBVUklzIGEgYnJvd3NlciBjYW4gcmVkaXJlY3QgdG8g\
YWZ0ZXIgYSBzdWNjZXNzZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxlIHdpbGRjYXJkcyBhcmUgYWxs\
b3dlZC4gZS5nLiBodHRwczovL215c2VydmljZS1teXByb2plY3QuYXBwcy5leGFtcGxlLmNvbS8q\
CiAgICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogcGVyc2lzdGVudAogICAgZGVzY3JpcHRpb246\
IERlcGxveSBrZXljbG9hayB3aXRoIHBlcnNpc3RlbmNlCiAgICBmcmVlOiBUcnVlCiAgICBkZWZh\
dWx0OiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEtleWNsb2FrIHBlcnNp\
c3RlbnQKICAgIHBhcmFtZXRlcnM6CiAgICAtIG5hbWU6IGFkbWluX3VzZXJuYW1lCiAgICAgIHJl\
cXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gdXNlcm5hbWUKICAgIC0gbmFtZTogYWRtaW5fcGFzc3dv\
cmQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlf\
dHlwZTogcGFzc3dvcmQKICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHBhc3N3b3JkCiAgICAt\
IG5hbWU6IGtleWNsb2FrX3VyaQogICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBVUkwKICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVy\
ZSB0aGUgYXBwbGljYXRpb25zIHNob3VsZCByZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24u\
IE11c3QgYmUgcmVzb2x2YWJsZSBieSB0aGUgYnJvd3NlciBhbmQgcG9kcy4gTGVhdmUgZW1wdHkg\
dG8gdXNlIHRoZSBob3N0IGdlbmVyYXRlZCBieSB0aGUgcm91dGUKICAgIC0gbmFtZTogcHZjX3Np\
emUKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRlZmF1bHQ6IDIwME1pCiAgICAgIGRlc2NyaXB0\
aW9uOiBEYXRhYmFzZSBzdG9yYWdlIHNpemUKICAgICAgdGl0bGU6IFN0b3JhZ2Ugc2l6ZQogICAg\
YmluZF9wYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBzZXJ2aWNlX25hbWUKICAgICAgcmVxdWlyZWQ6\
IFRydWUKICAgICAgdGl0bGU6IE5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gYmluZAogICAgICB0eXBl\
OiBzdHJpbmcKICAgIC0gbmFtZTogcmVkaXJlY3RfdXJpcwogICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICB0aXRsZTogUmVkaXJlY3QgVVJJcwogICAgICBkZXNjcmlwdGlvbjogVmFsaWQgUmVkaXJl\
Y3QgVVJJcyBhIGJyb3dzZXIgY2FuIHJlZGlyZWN0IHRvIGFmdGVyIGEgc3VjY2Vzc2Z1bCBsb2dp\
bi9sb2dvdXQuIFNpbXBsZSB3aWxkY2FyZHMgYXJlIGFsbG93ZWQuIGUuZy4gaHR0cHM6Ly9teXNl\
cnZpY2UtbXlwcm9qZWN0LmFwcHMuZXhhbXBsZS5jb20vKgogICAgICB0eXBlOiBzdHJpbmcKICAt\
IG5hbWU6IGV4dGVybmFsCiAgICBkZXNjcmlwdGlvbjogQWxsb3dzIGF1dGhlbnRpY2F0aW5nIGFw\
cGxpY2F0aW9ucyB0byBhbiBleHRlcm5hbCBLZXljbG9hayBpbnN0YW5jZQogICAgZnJlZTogVHJ1\
ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBLZXljbG9hayAoZXh0ZXJuYWwpCiAg\
ICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBhZG1pbl91c2VybmFtZQogICAgICByZXF1aXJlZDog\
VHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6\
IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHBh\
c3N3b3JkCiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiBwYXNzd29yZAogICAgLSBuYW1lOiBr\
ZXljbG9ha191cmkKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
IHRpdGxlOiBLZXljbG9hayBVUkwKICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVyZSB0aGUgYXBw\
bGljYXRpb25zIHNob3VsZCByZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24uIE11c3QgYmUg\
cmVzb2x2YWJsZSBieSB0aGUgYnJvd3NlciBhbmQgcG9kcy4KICAgIGJpbmRfcGFyYW1ldGVyczoK\
ICAgIC0gbmFtZTogc2VydmljZV9uYW1lCiAgICAgIHRpdGxlOiBOYW1lIG9mIHRoZSBzZXJ2aWNl\
IHRvIGJpbmQKICAgICAgdHlwZTogc3RyaW5nCiAgICAtIG5hbWU6IHJlZGlyZWN0X3VyaXMKICAg\
ICAgdGl0bGU6IFJlZGlyZWN0IFVSSXMKICAgICAgZGVzY3JpcHRpb246IFZhbGlkIFJlZGlyZWN0\
IFVSSXMgYSBicm93c2VyIGNhbiByZWRpcmVjdCB0byBhZnRlciBhIHN1Y2Nlc3NmdWwgbG9naW4v\
bG9nb3V0LiBTaW1wbGUgd2lsZGNhcmRzIGFyZSBhbGxvd2VkLiBlLmcuIGh0dHBzOi8vbXlzZXJ2\
aWNlLW15cHJvamVjdC5hcHBzLmV4YW1wbGUuY29tLyoKICAgICAgdHlwZTogc3RyaW5nCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
