version: 1.0
name: rhsso-apb
description: Single Sign-On - Open Source Identity and Access Management
bindable: True
async: optional
tags:
  - sso
  - keycloak
  - rhsso
metadata:
  displayName: Single Sign-On (APB)
  imageUrl: "https://pbs.twimg.com/profile_images/702119821979344897/oAC05cEB_400x400.png"
  documentationUrl: "https://access.redhat.com/documentation/en/red-hat-single-sign-on/"
  providerDisplayName: "Red Hat, Inc."
  dependencies: ['Postgresql:9.5']
  serviceName: rhsso
plans:
  - name: ephemeral
    description: Deploy Single Sign-On without persistence
    free: True
    metadata:
      displayName: Single Sign-On ephemeral
    parameters:
    - name: admin_username
      required: True
      default: admin
      type: string
      title: Keycloak admin username
    - name: admin_password
      required: True
      type: string
      display_type: password
      title: Keycloak admin password
    - name: apb_keycloak_uri
      required: False
      type: string
      title: Keycloak URL
      description: URL where the applications should redirect to for authentication. Must be resolvable by the browser and pods. Leave empty to use the host generated by the route
    - name: keycloak_users
      required: False
      type: string
      display_type: textarea
      title: Users
      description: JSON defining the users to add to the realm and their memberships
    - name: keycloak_roles
      required: False
      type: string
      display_type: textarea
      title: Roles
      description: JSON defining the roles to add to the realm
    bind_parameters:
    - name: service_name
      title: Name of the service to bind
      type: string
    - name: redirect_uris
      title: Redirect URIs
      description: Valid Redirect URIs a browser can redirect to after a successful login/logout. Simple wildcards are allowed. e.g. https://myservice-myproject.apps.example.com/*
      type: string
  - name: persistent
    description: Deploy Single Sign-On with persistence
    free: True
    default: True
    metadata:
      displayName: Single Sign-On persistent
    parameters:
    - name: admin_username
      required: True
      default: admin
      type: string
      title: Keycloak admin username
    - name: admin_password
      required: True
      type: string
      display_type: password
      title: Keycloak admin password
    - name: apb_keycloak_uri
      required: False
      type: string
      title: Keycloak URL
      description: URL where the applications should redirect to for authentication. Must be resolvable by the browser and pods. Leave empty to use the host generated by the route
    - name: pvc_size
      type: string
      default: 200Mi
      description: Database storage size
      title: Storage size
    - name: keycloak_users
      required: False
      type: string
      display_type: textarea
      title: Users
      description: JSON defining the users to add to the realm and their memberships
    - name: keycloak_roles
      required: False
      type: string
      display_type: textarea
      title: Roles
      description: JSON defining the roles to add to the realm
    bind_parameters:
    - name: service_name
      required: True
      title: Name of the service to bind
      type: string
    - name: redirect_uris
      required: True
      title: Redirect URIs
      description: Valid Redirect URIs a browser can redirect to after a successful login/logout. Simple wildcards are allowed. e.g. https://myservice-myproject.apps.example.com/*
      type: string
  - name: external
    description: Allows authenticating applications to an external Keycloak instance
    free: True
    metadata:
      displayName: Single Sign-On (external)
    parameters:
    - name: admin_username
      required: True
      default: admin
      type: string
      title: Keycloak admin username
    - name: admin_password
      required: True
      type: string
      display_type: password
      title: Keycloak admin password
    - name: apb_keycloak_uri
      required: True
      type: string
      title: Keycloak URL
      description: URL where the applications should redirect to for authentication. Must be resolvable by the browser and pods.
    - name: keycloak_users
      required: False
      type: string
      display_type: textarea
      title: Users
      description: JSON defining the users to add to the realm and their memberships
    - name: keycloak_roles
      required: False
      type: string
      display_type: textarea
      title: Roles
      description: JSON defining the roles to add to the realm
    bind_parameters:
    - name: service_name
      title: Name of the service to bind
      type: string
    - name: redirect_uris
      title: Redirect URIs
      description: Valid Redirect URIs a browser can redirect to after a successful login/logout. Simple wildcards are allowed. e.g. https://myservice-myproject.apps.example.com/*
      type: string
